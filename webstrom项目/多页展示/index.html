<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="./css/index.css">
    <script src="js/myjs.js"></script>
    <script src="./js/less.min.js"></script>
    <script src="./js/jquery.js"></script>
</head>

<body>
    <div id="box">
        <div class="mask">
            <div class="maskUp"></div>
            <span class="maskLine"></span>
            <div class="maskDown"></div>
        </div>
        <header class="header">
            <div class="logo">
                <h1><img src="./img/logo.png" width="188" height="60" alt=""></h1>
                <div class="music">
                    <audio src="./audio/audio.mp3"></audio>
                </div>
            </div>
            <nav class="Navs">
                <ul class="Li_list">
                    <li class="liNode">
                        <a href="###">
                            <p class="up"></p>
                            <p class="down"></p>
                        </a>
                    </li>
                    <li class="liNode">
                        <a href="###">
                            <p class="up">course</p>
                            <p class="down">course</p>
                        </a>
                    </li>
                    <li class="liNode">
                        <a href="###">
                            <p class="up">workers</p>
                            <p class="down">workers</p>
                        </a>
                    </li>
                    <li class="liNode">
                        <a href="###">
                            <p class="up">about</p>
                            <p class="down">about</p>
                        </a>
                    </li>
                    <li class="liNode">
                        <a href="###">
                            <p class="up">team</p>
                            <p class="down">team</p>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="arrow"></div>
        </header>
        <article class="content">
            <ul class="contentList">
                <li class="contentLNode screen1">
                    <div class="contentInner">
                        <ul class="homeList ">
                            <li class="Displ">NumberOne</li>
                            <li>NumberTwo</li>
                            <li>NumberThree</li>
                            <li>NumberFour</li>
                        </ul>
                        <div class="HomeselectList">
                            <ul class="selectList_1">
                                <li class="active"></li>
                                <li></li>
                                <li></li>
                                <li></li>
                            </ul>

                        </div>

                    </div>
                </li>
                <li class="contentLNode screen2">
                    <div class="contentInner">
                        <div class="title">
                            <p>
                                EINBLICK<br/> ERKENNTNIS
                                <br/> ERGEBNIS
                                <br/>
                            </p>
                        </div>
                        <div class="bottom">
                            Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann. Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren, was
                            uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                        </div>
                        <div class="right">
                            <div class="right_1"></div>
                            <div class="right_1"></div>
                            <div class="right_1"></div>
                            <div class="right_1"></div>
                            <div class="right_1"></div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>
                            <div class="pic">
                                <div class="pic_1">
                                    <span>哈哈</span>
                                </div>
                            </div>


                        </div>
                        <div class="plane1"></div>
                        <div class="plane2"></div>
                        <div class="plane3"></div>

                    </div>
                </li>
                <li class="contentLNode screen3">
                    <div class="contentInner">
                        <div class="top">
                            <p>
                                EINBLICK </br>
                                ERKENNTNIS </br>
                                ERGEBNIS </br>
                            </p>
                        </div>
                        <div class="middle"><img src="./img/robot.png" alt=""></div>

                        <div class="bottom">
                            <ul class="imgList">
                                <li class="works"><img src="./img/worksimg1.jpg" alt="">
                                    <div class="mask">
                                        <p>爱马仕·巴黎世家·卡地亚</p>
                                        <i class="icon"> <img src="./img/zoomico.png" alt=""></i>
                                    </div>
                                </li>
                                <li class="works"><img src="./img/worksimg2.jpg" alt="">
                                    <div class="mask">
                                        <p>爱马仕·巴黎世家·卡地亚</p>
                                        <i class="icon"> <img src="./img/zoomico.png" alt=""></i>
                                    </div>
                                </li>

                                <li class="works"><img src="./img/worksimg3.jpg" alt="">
                                    <div class="mask">
                                        <p>爱马仕·巴黎世家·卡地亚</p>
                                        <i class="icon"> <img src="./img/zoomico.png" alt=""></i>
                                    </div>
                                </li>
                                <li class="works"><img src="./img/worksimg4.jpg" alt="">
                                    <div class="mask">
                                        <p>爱马仕·巴黎世家·卡地亚</p>
                                        <i class="icon"> <img src="./img/zoomico.png" alt=""></i>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="pancel1"></div>
                        <div class="pancel2"></div>
                        <div class="pancel3"></div>
                    </div>
                </li>
                <li class="contentLNode screen4">
                    <div class="contentInner">
                        <div class="top1">
                            <p>
                                EINBLICK </br>
                                ERKENNTNIS </br>
                                ERGEBNIS </br>
                            </p>
                        </div>
                        <div class="bottom">
                            <p class="explain">Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.</p>
                        </div>
                        <div class="right">
                            <div class="one1">
                                <img src="./img/about2.jpg" alt="">
                                <ul class="masking_bag">
                                    <li><img src="./img/about1.jpg" alt=""></li>
                                    <li><img src="./img/about1.jpg" alt=""></li>
                                    <li><img src="./img/about1.jpg" alt=""></li>
                                    <li><img src="./img/about1.jpg" alt=""></li>
                                </ul>
                            </div>
                            <div class="two1">
                                <img src="./img/about4.jpg" alt="">
                                <ul class="masking_bag">
                                    <li><img src="./img/about3.jpg" alt=""></li>
                                    <li><img src="./img/about3.jpg" alt=""></li>
                                    <li><img src="./img/about3.jpg" alt=""></li>
                                    <li><img src="./img/about3.jpg" alt=""></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </li>
                <!--            第五屏-->
                <li class="contentLNode screen5">
                    <div class="contentInner">
                        <div class="title">
                            <p>Song<br/> of Azure
                            </p>
                        </div>
                        <div class="paragraph">
                            <p> Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.</p>
                        </div>
                        <!--                    人物图像-->
                        <div class="bottom">
                            <div class="one pic"><img src="./img/team.png" alt=""></div>
                            <div class="two pic"><img src="./img/team.png" alt=""></div>
                            <div class="three pic"><img src="./img/team.png" alt=""></div>
                            <div class="four pic"><img src="./img/team.png" alt=""></div>
                        </div>
                    </div>
                </li>
            </ul>
            <div class="aside">
                <ul class="aside_1">
                    <li class="aside_lis_active"></li>
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
        </article>
    </div>
    <script>
        window.addEventListener("DOMContentLoaded", function() {
            var oArrow = document.querySelector(".arrow");
            var oHeader = document.querySelector(".header");
            var oLiNode = document.querySelectorAll(".Li_list .liNode");
            var oUp = document.querySelectorAll(".Li_list .liNode .up");
            var oContents = document.querySelector(".content");
            var oContentList = oContents.querySelector(".contentList");
            var oContentLNode = oContentList.querySelectorAll(".contentLNode");
            var oScreen1 = document.querySelector(".screen1");
            var oHomeList = oScreen1.querySelector(".homeList");
            var oHomeLis = oHomeList.querySelectorAll("li");
            var oHomeSelectList = oScreen1.querySelector(".HomeselectList");
            var oHomeSelectLis = oHomeSelectList.querySelectorAll("li");
            var oAside = document.querySelector(".aside");
            var oAside_Lis = oAside.querySelectorAll("li");
            var oIsanimation = false;
            var oldindex = 0;
            var flag = "";
            var index = 0;
            var timer = null;
            var AutoCarouseltimer = null;
            var oMycanvas = null;
            var CreatBubbleTimer = null;
            var DrawingBubbleTimer = null;
            var oBottom = document.querySelector(".screen5 .bottom");
            var oPic = oBottom.querySelectorAll(".pic");
            oArrow.style.left = "" + oLiNode[index].getBoundingClientRect().left - oHeader.getBoundingClientRect().left + oArrow.offsetWidth / 2 + (oLiNode[0].offsetWidth / 2 - oArrow.offsetWidth / 2) + "px";
            oUp[index].style.width = "100%";
            window.onresize = function() {
                navclick();
                zstr(index)
            };

            function navclick() {
                for (var i = 0; i < oLiNode.length; i++) {
                    oLiNode[i].index = i;
                    oLiNode[i].onclick = function() {
                        for (var i = 0; i < oLiNode.length; i++) {
                            oUp[i].style.width = 0 + "px";
                        }
                        index = this.index;
                        zstr(index)
                    }
                }
            }

            navclick();
            zstr(index);

            function zstr(index) {
                // Content滚动（页面切换）
                function ContentMove() {
                    oContentList.style.top = -(index * (my.getScreen().height - oHeader.offsetHeight)) + "px";
                    // 小三角移动的位置
                    oArrow.style.left = oLiNode[index].getBoundingClientRect().left - oHeader.getBoundingClientRect().left + oArrow.offsetWidth / 2 + (oLiNode[index].offsetWidth / 2 - oArrow.offsetWidth / 2) + "px";
                }

                ContentMove();

                //页面变换，小圆点变色
                function oAside_Lis_color() {
                    for (var i = 0; i < oAside_Lis.length; i++) {
                        oAside_Lis[i].className = "";
                    }
                    oAside_Lis[index].className = "aside_lis_active";
                }

                oAside_Lis_color();

                // 导航的颜色变换
                function navColor() {
                    for (var i = 0; i < oLiNode.length; i++) {
                        oUp[i].style.width = 0 + "px";
                    }
                    oUp[index].style.width = "100%";
                }

                navColor();
                // 获取主体内容的高度
                oContents.style.height = my.getScreen().height - oHeader.offsetHeight + "px";
                //获取每个列表的高度
                for (var i = 0; i < oContentLNode.length; i++) {
                    oContentLNode[i].style.height = my.getScreen().height - oHeader.offsetHeight + "px";
                }
                // 滚轮滚动
                document.onmousewheel = function(ev) {
                    clearTimeout(timer);
                    timer = setTimeout(function() {
                        console.log(2);
                        scrollMove(ev)
                    }, 300)
                };
                window.addEventListener("DOMMouseScroll", function(ev) {
                    clearTimeout(timer);
                    timer = setTimeout(function() {

                        scrollMove(ev)
                    }, 300)
                }, false);

                // 判断鼠标滚轮向上还是向上滚动
                function scrollMove(ev) {
                    var e = ev || window.event;
                    if (ev.wheelDelta) {
                        if (e.wheelDelta > 0) {
                            flag = "up";
                        } else {
                            flag = "down";
                        }
                    } else if (e.detail) {
                        if (e.detail > 0) {
                            flag = "up";
                        } else {
                            flag = "down";
                        }
                    }
                    //鼠标滚轮分别向上滚动、向下滚动执行相应事件
                    switch (flag) {
                        case "up":
                            if (index > 0) {
                                index--;
                                zstr(index);
                            }
                            break;
                        case "down":
                            if (index < oContentLNode.length - 1) {
                                index++;
                                zstr(index);
                            }
                            break;
                    }
                }

                // 出入场动画的容器
                var doc = document;
                var animationArr = [{
                    inAnimation: function() {
                        var oHomeList = doc.querySelector(".homeList");
                        var oHomeNav = doc.querySelector(".HomeselectList");
                        oHomeList.style.opacity = "1";
                        oHomeNav.style.opacity = "1";
                        oHomeList.style.transform = "translateY(0)";
                        oHomeNav.style.transform = "translateY(0)";
                    },
                    outAnimation: function() {
                        var oHomeList = doc.querySelector(".homeList");
                        var oHomeNav = doc.querySelector(".HomeselectList");
                        oHomeList.style.opacity = "0.5";
                        oHomeNav.style.opacity = "0.5";
                        oHomeList.style.transform = "translateY(-200px)";
                        oHomeNav.style.transform = "translateY(200px)";

                    }
                }, {
                    inAnimation: function() {
                        var oPlane1 = doc.querySelector(".plane1");
                        var oPlane2 = doc.querySelector(".plane2");
                        var oPlane3 = doc.querySelector(".plane3");
                        oPlane1.style.transform = "translate(0,0)";
                        oPlane2.style.transform = "translate(0,0)";
                        oPlane3.style.transform = "translate(0,0)";
                    },
                    outAnimation: function() {
                        var oPlane1 = doc.querySelector(".plane1");
                        var oPlane2 = doc.querySelector(".plane2");
                        var oPlane3 = doc.querySelector(".plane3");
                        oPlane1.style.transform = "translate(-200px,-200px)";
                        oPlane2.style.transform = "translate(-200px,200px)";
                        oPlane3.style.transform = "translate(200px,-200px)";
                    }
                }, {
                    inAnimation: function() {
                        var oPancel1 = doc.querySelector(".pancel1");
                        var oPancel2 = doc.querySelector(".pancel2");
                        var oPancel3 = doc.querySelector(".pancel3");
                        oPancel1.style.transform = "translate(0,0)";
                        oPancel2.style.transform = "translate(0,0)";
                        oPancel3.style.transform = "translate(0,0)";
                    },
                    outAnimation: function() {
                        var oPancel1 = doc.querySelector(".pancel1");
                        var oPancel2 = doc.querySelector(".pancel2");
                        var oPancel3 = doc.querySelector(".pancel3");
                        oPancel1.style.transform = "translate(0,-40px)";
                        oPancel2.style.transform = "translate(0,200px)";
                        oPancel3.style.transform = "translate(200px,200px)";
                    }
                }, {
                    inAnimation: function() {
                        var oAbout3Item1 = doc.querySelector(".right .one1");
                        var oAbout3Item2 = doc.querySelector(".right .two1");
                        oAbout3Item1.style.transform = "rotate(0deg)";
                        oAbout3Item2.style.transform = "rotate(0deg)";
                    },
                    outAnimation: function() {
                        var oAbout3Item1 = doc.querySelector(".right .one1");
                        var oAbout3Item2 = doc.querySelector(".right .two1");
                        oAbout3Item1.style.transform = "rotate(-30deg)";
                        oAbout3Item2.style.transform = "rotate(30deg)";
                    }
                }, {
                    inAnimation: function() {
                        var oTeam1 = doc.querySelector(".screen5 .title");
                        var oTeam2 = doc.querySelector(".screen5 .paragraph");
                        oTeam1.style.transform = "translateX(0)";
                        oTeam2.style.transform = "translateX(0)";
                    },
                    outAnimation: function() {
                        var oTeam1 = doc.querySelector(".title");
                        var oTeam2 = doc.querySelector(".paragraph");
                        oTeam1.style.transform = "translateX(-200px)";
                        oTeam2.style.transform = "translateX(200px)";
                    }
                }, ];
                // 临时调用出入场动画
                // var len = animationArr.length;
                // for (var i = 0; i < len; i++) {
                if (index == 0) {
                    setTimeout(function() {
                        animationArr[0].inAnimation();
                    }, 2000);
                } else {
                    animationArr[index].inAnimation();
                    console.log(index);
                }

            }


            // 第一屏home点击事件
            for (var i = 0; i < oHomeSelectLis.length; i++) {
                oHomeSelectLis[i].index = i;
                oHomeSelectLis[i].onclick = function() {
                    if (oIsanimation) {
                        return;
                    }
                    oIsanimation = true;
                    for (var j = 0; j < oHomeSelectLis.length; j++) {
                        oHomeSelectLis[j].className = "";
                        oHomeLis[j].className = "";
                    }
                    this.className = "active";
                    if (this.index > oldindex) {
                        oHomeLis[oldindex].className = " left_hidden";
                        oHomeLis[this.index].className = "right_show";
                    } else if (this.index < oldindex) {
                        oHomeLis[this.index].className = "left_show";
                        oHomeLis[oldindex].className = "right_hidden";
                    }
                    oldindex = this.index;
                    setTimeout(function() {
                        oIsanimation = false;
                        console.log(3);
                    }, 2000)
                }
            }
            //第一屏自动滚动事件
            AutoCarouseltimer = setInterval(Carousel, 3000);

            function Carousel() {
                if (oIsanimation) {
                    return;
                }
                oIsanimation = true;
                for (var j = 0; j < oHomeSelectLis.length; j++) {
                    oHomeSelectLis[j].className = "";
                    oHomeLis[j].className = "";
                }
                oHomeLis[oldindex].className = "left_hidden";
                oHomeLis[oldindex + 1 > 3 ? 0 : oldindex + 1].className = "right_show";
                oHomeSelectLis[oldindex + 1 > 3 ? 0 : oldindex + 1].className = "active";
                console.log(oHomeLis[oldindex + 1 > 3 ? 0 : oldindex + 1].className);
                if (oldindex < oHomeLis.length - 1) {
                    oldindex++;
                } else {
                    oldindex = 0;
                }

                setTimeout(function() {
                    oIsanimation = false;
                }, 2000)
            }

            // 侧边栏点击切换页面
            for (var i = 0; i < oAside_Lis.length; i++) {
                oAside_Lis[i].index = i;
                oAside_Lis[i].onclick = function() {
                    for (var j = 0; j < oAside_Lis.length; j++) {
                        oAside_Lis[j].className = "";
                    }
                    this.className = "aside_lis_active";
                    index = this.index;
                    zstr(index);
                }
            }
            // 鼠标移入后
            for (var i = 0; i < oPic.length; i++) {
                oPic[i].onmouseenter = function() {
                    for (var i = 0; i < oPic.length; i++) {
                        oPic[i].style.opacity = 0.5;
                    }
                    this.style.opacity = 1;
                    console.log(oMycanvas);
                    if (!oMycanvas) {
                        oMycanvas = document.createElement("canvas");
                        oMycanvas.width = oPic[0].offsetWidth;
                        oMycanvas.height = oPic[0].offsetHeight;
                        // console.log(oMycanvas);
                        oBottom.appendChild(oMycanvas);
                        Bubble();
                    }
                    oMycanvas.style.left = this.offsetLeft + "px";
                }
            }
            //第五屏鼠标移到图片上后的气泡效果
            oBottom.onmouseleave = function() {
                // 鼠标移出图片后
                for (var i = 0; i < oPic.length; i++) {
                    oPic[i].style.opacity = 0.5;
                }
                this.removeChild(oMycanvas);
                oMycanvas = null;
                clearInterval(CreatBubbleTimer);
                clearInterval(DrawingBubbleTimer);
            };

            function Bubble() {
                var arr = [];
                var ctx = oMycanvas.getContext("2d");
                CreatBubbleTimer = setInterval(function() {
                    var obj = {};
                    obj.x = Math.floor(Math.random() * oMycanvas.width);
                    obj.y = Math.floor(Math.random() * oMycanvas.height);
                    obj.red = Math.floor(Math.random() * 256);
                    obj.green = Math.floor(Math.random() * 256);
                    obj.blue = Math.floor(Math.random() * 256);
                    obj.op = Math.random();
                    obj.StartX = obj.x;
                    obj.StartY = oMycanvas.height;
                    obj.deg = 0;
                    obj.r = 10;
                    obj.Scale = Math.round(Math.random() * 80 + 20);
                    arr.push(obj);
                }, 20);
                DrawingBubbleTimer = setInterval(function() {
                    ctx.clearRect(0, 0, oMycanvas.width, oMycanvas.height);
                    for (var i = 0; i < arr.length; i++) {
                        arr[i].deg++;
                        arr[i].x = arr[i].StartX + Math.sin(arr[i].deg * Math.PI / 180) * arr[i].Scale;
                        arr[i].y = arr[i].StartY - (Math.ceil(arr[i].deg) * arr[i].Scale * 0.1);
                        if (arr[i].y + arr[i].r < 0) {
                            arr.splice(i, 1);
                        }
                    }
                    for (var j = 0; j < arr.length; j++) {
                        ctx.beginPath();
                        ctx.arc(arr[j].x, arr[j].y, arr[j].r, 0, 2 * Math.PI, true);
                        ctx.fillStyle = `rgba(${arr[j].red},${arr[j].green},${arr[j].blue},${arr[j].op})`;
                        ctx.fill();
                    }
                }, 20);
            }

            // 音乐
            var oMusic = document.querySelector(".music");
            var oAudio = document.querySelector("audio");
            oMusic.onclick = function() {
                if (oAudio.paused) {
                    oAudio.play();
                    oMusic.style.backgroundImage = "url(./img/musicon.gif)";
                } else {
                    oAudio.pause();
                    oMusic.style.backgroundImage = "url(./img/musicoff.gif)";
                }
            };

            //开机动画
            var arr = ["about1.jpg", "about2.jpg", "about3.jpg", "about4.jpg", "worksimg1.jpg", "worksimg2.jpg",
                "worksimg3.jpg", "worksimg4.jpg", "zoomico.png", "pcwelt.png", "logo.png", "home.png", "bg1.jpg", "plus_row.png", "robot.png"
            ];
            var loaded = 0;
            for (var i = 0; i < arr.length; i++) {
                var newImg = new Image();
                newImg.src = "./img/" + arr[i] + "";
                newImg.onload = function() {
                    loaded++;
                    var scale = loaded / arr.length * 100;
                    $(".maskLine")[0].style.width = scale + "%";
                }
            }
            $(".maskLine")[0].addEventListener("transitionend", function() {
                $(".maskLine").remove();
                $(".maskDown")[0].style.height = 0;
                $(".maskUp")[0].style.height = 0;
            })
            $(".maskDown")[0].addEventListener("transitionend", function() {
                $("#box .mask").remove();
            });


        }, false);
    </script>
</body>

</html>